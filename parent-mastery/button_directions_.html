<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Parent Mastery Dashboard Setup</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            background: #f6f8fa;
            margin: 0;
            padding: 40px 20px;
            color: #1f2937;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.06);
        }

        h1 {
            margin-top: 0;
            font-size: 28px;
        }

        h2 {
            margin-top: 40px;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 8px;
            font-size: 20px;
        }

        .subtitle {
            color: #6b7280;
            margin-top: -10px;
            margin-bottom: 30px;
        }

        .step {
            margin-bottom: 24px;
        }

        .note {
            background: #eef6ff;
            padding: 16px;
            border-left: 4px solid #2563eb;
            border-radius: 6px;
            margin: 20px 0;
        }

        pre {
            background: #0f172a;
            color: #f8fafc;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 14px;
        }

        code {
            font-family: Consolas, Monaco, monospace;
        }

        textarea.generated {
            width: 100%;
            min-height: 170px;
            resize: vertical;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            font-family: Consolas, Monaco, monospace;
            font-size: 13px;
            line-height: 1.4;
            background: #0f172a;
            color: #f8fafc;
        }

        input[type="text"] {
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            font-size: 14px;
            width: 220px;
        }

        .btn {
            padding: 10px 14px;
            border-radius: 10px;
            border: 1px solid #d1d5db;
            background: white;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            margin-left: 8px;
        }

        .important {
            background: #fff7ed;
            border-left: 4px solid #f97316;
            padding: 16px;
            border-radius: 6px;
            margin-top: 30px;
        }
    </style>
</head>
<body>

<div class="container">

    <h1>Parent Mastery Dashboard Setup Instructions</h1>
    <div class="subtitle">For Canvas Admins</div>

    <p>
        This guide will add a <strong>“View Mastery Dashboard”</strong> button to the top of a course Front Page
        for use in the Canvas Parent app.
    </p>

    <h2>Step 1 — Get the Course ID</h2>

    <p>Open the course and look at the URL:</p>

    <pre><code>/courses/38297</code></pre>

    <p>The number after <code>/courses/</code> is the Course ID.</p>

    <h2>Step 2 — Create the Mastery Dashboard Page</h2>

    <ol>
        <li>Go to <strong>Pages</strong>.</li>
        <li>Click <strong>+ Page</strong>.</li>
        <li>Title it: <strong>Mastery Dashboard</strong></li>
        <li>In HTML Editor paste:</li>
    </ol>

    <pre><code>&lt;div id="parent-mastery-root"&gt;&lt;/div&gt;</code></pre>

    <ol start="5">
        <li>Click <strong>Save & Publish</strong>.</li>
    </ol>

    <h2>Step 3 — Generate the Button Code</h2>

    <p>Enter the Course ID and copy the generated button code below.</p>

    <input id="courseIdInput" type="text" placeholder="Enter Course ID" />
    <button class="btn" onclick="copyCode()">Copy Code</button>

    <textarea id="generatedCode" class="generated" readonly></textarea>

    <h2>Step 4 — Paste Into Front Page</h2>

    <ol>
        <li>Go to <strong>Pages → Front Page</strong>.</li>
        <li>Click <strong>Edit</strong>.</li>
        <li>Switch to <strong>HTML Editor</strong>.</li>
        <li>Paste the generated code at the very top.</li>
        <li>Click <strong>Save & Publish</strong>.</li>
    </ol>

    <div class="important">
        <h2>Important Notes</h2>
        <ul>
            <li>The <code>?cg_web=1</code> parameter is required for the Parent app webview.</li>
            <li>All links are relative, so this works in test, beta, and production environments.</li>
            <li>The dashboard only renders data for observers.</li>
        </ul>
    </div>

</div>

<script>
    const TEMPLATE = `<div style="margin: 16px 0;">
  <a
    href="/courses/COURSE_ID/pages/mastery-dashboard?cg_web=1"
    data-api-endpoint="/api/v1/courses/COURSE_ID/pages/mastery-dashboard"
    data-api-returntype="Page"
    style="display:block; padding:14px; background:#005f9e; color:white; text-align:center; border-radius:8px; text-decoration:none; font-size:16px; font-weight:600;"
  >
    View Mastery Dashboard
  </a>
  <div style="font-size:12px; color:#666; margin-top:6px; text-align:center;">
    For parents/observers using the Canvas Parent app
  </div>
</div>`;

    function updateCode() {
        const id = document.getElementById("courseIdInput").value.replace(/[^\d]/g, "");
        document.getElementById("generatedCode").value =
            id ? TEMPLATE.replaceAll("COURSE_ID", id) : "";
    }

    function copyCode() {
        const textarea = document.getElementById("generatedCode");
        textarea.select();
        document.execCommand("copy");
    }

    document.getElementById("courseIdInput").addEventListener("input", updateCode);
</script>

</body>
</html>